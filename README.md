eliom and facebook
==================

This project started after observing that facebook
users attending, invited or that declined the invitations
to some events on facebook, were not invited to similar events.

So why not creating a site to gather/upload these users
to facebook custom audiences [0] ?

To implement it, I decided to try eliom [1] as
the ocaml (https://ocaml.org/) compiler has been quite a reliable programming teacher up to now.

The bindings to the facebook API were quite easy to implement (https://github.com/yetanotherion/fbgraph_ml).
However, when plugging the site to the custom audience API, some unexpected behavior
(the API returning OK, but no users added) made me google about it.
Browsing the links, I learnt:
- what facebook scraping [2] was, and
- that what I was developing, was a tool to scrap users from events.

One could say I may have checked that earlier :). Nevertheless, I decided to stop the project.

To have an overview of what the code does you can watch (https://vimeo.com/121533725)
by selecting HD in vimeo's player, as the quality is too low else [3].

Regarding eliom, some features like:

 - merlin (https://github.com/the-lambda-church/merlin) on eliom,
 - a unit testing framework, are missing.

Nevertheless, eliom is the most comfortable backend/frontend programming framework I tried [4].
Note that the lines of code in (https://github.com/Drup/evePI) have been very helpful to ramp up.
Hoping the ones in that project could answer to some of "how to do that in eliom" questions too,
feel free to read/use them :).


[0]: Custom audiences: permits managing group of users to which an advertiser could send updates (https://www.facebook.com/help/341425252616329).

[1]: Eliom seems to be the new name of ocsigen (http://ocsigen.org/).

[2]: Gather facebook user ids by browsing the web (https://www.facebook.com/apps/site_scraping_tos_terms.php).

[3]: I did not manage to get a better recording quality on my mac.

[4]:

- backend:

   - php:
     (http://php.net)

   - java:
     (http://tomcat.apache.org),
     (http://www.ibm.com/software/websphere),
     (http://eclipse.org/jetty)

   - python:
     flask (http://flask.pocoo.org/),
     the custom framework used on buildbot 8 (http://buildbot.net/), based on jinja (http://jinja.pocoo.org/) and twisted (https://twistedmatrix.com/trac/).

- frontend:

    - angularjs: (https://angularjs.org/).


Instructions
============

This project is (initially) generated by eliom-distillery as the basic
project "mb".

Generally, you can compile it and run ocsigenserver on it by
  $ make test.byte (or test.opt)
See below for other useful targets for make.

Generated files
---------------

The following files in this directory have been generated by
eliom-distillery:

 - mb.eliom
   This is your initial source file.
   All Eliom files (*.eliom, *.eliomi) in this directory are
   automatically considered.  To add a .ml/.mli file to your project,
   append it to the variable SERVER_FILES or CLIENT_FILES.

 - static/
   The content of this folder is statically served. Put your CSS or
   additional JavaScript files here!

 - Makefile.options
   Configure your project here!

 - mb.conf.in
   This file is a template for the configuration file for
   ocsigenserver. You will rarely have to edit itself - it takes its
   variables from the Makefile.options. This way, the installation
   rules and the configuration files are synchronized with respect to
   the different folders.

 - Makefile
   This contains all rules necessary to build, test, and run your
   Eliom application. You better don't touch it ;) See below for the
   relevant targets.

 - local/
   This directory is the target of the temporary installation of
   your application, to test locally before doing a system-wide
   installation in /. Do not put anything manually here.

 - README
   Not completely describable here.


Makefile targets
----------------

Here's some help on how to work with this basic distillery project:

 - Test your application by compiling it and running ocsigenserver locally
     $ make test.byte (or test.opt)

 - Compile it only
     $ make all (or byte or opt)

 - Deploy your project on your system
     $ sudo make install (or install.byte or install.opt)

 - Run the server on the deployed project
     $ sudo make run.byte (or run.opt)

   If WWWUSER in the Makefile.options is you, you don't need the
   `sudo'. If Eliom isn't installed globally, however, you need to
   re-export some environment variables to make this work:
     $ sudo PATH=$PATH OCAMLPATH=$OCAMLPATH LD_LIBRARY_PATH=$LD_LIBRARY_PATH make run.byte/run.opt

 - If you need a findlib package in your project, add it to the
   variables SERVER_PACKAGES and/or CLIENT_PACKAGES. The configuration
   file will be automatically updated.
